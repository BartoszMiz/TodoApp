@page
@using TodoApp.Web.Models
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<table class="todo-table">
	<tr>
		<th>Instruction</th>
		<th>Deadline</th>
		<th>Added on</th>
		<th>Complete</th>
	</tr>
	@foreach (var todoItem in Model.TodoItems)
	{
		var deadlineState = Model.itemDeadlineStateCalculator.CalculateItemDeadlineState(todoItem.Deadline);
		var todoItemClass = string.Empty;
		if(deadlineState == ItemDeadlineState.PAST_DEADLINE)
			todoItemClass = "todo-past-deadline";
		else if(deadlineState == ItemDeadlineState.NEAR_DEADLINE)
			todoItemClass = "todo-near-deadline";

		<tr class="@todoItemClass">
			<td>@todoItem.Instruction</td>
			<td>@todoItem.Deadline.ToString("dd.MM.yyyy @ HH:mm")</td>
			<td>@todoItem.AdditionDate.ToString("dd.MM.yyyy @ HH:mm")</td>
			<td>
				<a class="todo-complete-icon">
					<i class="fas fa-check"></i>
				</a>
			</td>
		</tr>
	}
</table>
