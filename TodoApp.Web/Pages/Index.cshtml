@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<table class="todo-table">
	<tr>
		<th>Instruction</th>
		<th>Deadline</th>
		<th>Added on</th>
		<th>Complete</th>
	</tr>
	@foreach (var todoItem in Model.TodoItems)
	{
		var daysToDeadline = (todoItem.Deadline - DateTime.Now).Days;
		var isNearDeadline = daysToDeadline <= 1;
		var isPastDeadline = DateTime.Compare(todoItem.Deadline, DateTime.Now) < 0;
		var todoItemClass = string.Empty;
		if(isPastDeadline)
			todoItemClass = "todo-past-deadline";
		else if(isNearDeadline)
			todoItemClass = "todo-near-deadline";

		<tr class="@todoItemClass">
			<td>@todoItem.Instruction</td>
			<td>@todoItem.Deadline.ToString("dd.MM.yyyy @ HH:mm")</td>
			<td>@todoItem.AdditionDate.ToString("dd.MM.yyyy @ HH:mm")</td>
			<td>
				<a class="todo-complete-icon">
					<i class="fas fa-check"></i>
				</a>
			</td>
		</tr>
	}
</table>
